<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Account - BurgTV</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        :root{--bg:#0a0a0b;--bg-secondary:#111113;--text:#fff;--text-secondary:#a0a0a8;--accent:#B94A8E;--accent-light:#d85aa3;--accent-dark:#7B4397;--success:#10b981;--error:#ef4444;--border:rgba(255,255,255,0.12);--card-bg:rgba(255,255,255,0.03);--card-hover:rgba(255,255,255,0.06)}
        body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);min-height:100vh}
        .header{background:rgba(10,10,20,.95);backdrop-filter:blur(10px);border-bottom:1px solid var(--border);padding:0 20px;position:sticky;top:0;z-index:100}
        .header-inner{max-width:600px;margin:0 auto;height:64px;display:flex;align-items:center;justify-content:space-between}
        .logo{height:40px;width:auto}
        .back-link{display:flex;align-items:center;gap:8px;color:var(--text-secondary);text-decoration:none;font-size:14px}
        .back-link:hover{color:var(--text)}
        .back-link svg{width:18px;height:18px;stroke:currentColor;stroke-width:2;fill:none}
        .main{max-width:600px;margin:0 auto;padding:40px 20px}
        .page-title{font-size:28px;font-weight:700;margin-bottom:8px}
        .page-subtitle{color:var(--text-secondary);font-size:15px;margin-bottom:40px}
        .section{margin-bottom:32px}
        .section-title{font-size:13px;color:var(--text-secondary);text-transform:uppercase;letter-spacing:1px;font-weight:600;margin-bottom:16px}
        .btn{width:100%;padding:16px 20px;border-radius:12px;font-size:16px;font-family:'Inter',sans-serif;font-weight:600;display:flex;align-items:center;justify-content:center;gap:12px;cursor:pointer;transition:all 0.3s ease;border:none;margin-bottom:12px}
        .btn svg{width:20px;height:20px;stroke:currentColor;stroke-width:2;fill:none}
        .btn-primary{background:var(--accent);color:white}
        .btn-primary:hover{background:var(--accent-light);transform:translateY(-2px)}
        .btn-secondary{background:var(--card-hover);color:var(--text);border:1px solid var(--border)}
        .btn-secondary:hover{background:rgba(185,74,142,0.1);border-color:var(--accent)}
        .btn-danger{background:transparent;color:var(--error);border:1px solid rgba(239,68,68,0.3)}
        .btn-danger:hover{background:rgba(239,68,68,0.1);border-color:var(--error)}
        .info-card{background:var(--card-bg);border:1px solid var(--border);border-radius:16px;padding:20px;margin-bottom:16px}
        .info-label{font-size:13px;color:var(--text-secondary);margin-bottom:4px}
        .info-value{font-size:16px;font-weight:500}
        .footer{text-align:center;padding:32px 20px;color:var(--text-secondary);font-size:13px}
        .footer a{color:var(--text-secondary);text-decoration:none;margin:0 10px}
        .footer a:hover{color:var(--accent)}
    </style>
</head>
<body>
    <header class="header">
        <div class="header-inner">
            <a href="https://burgtv.com"><img src="logo.svg" alt="BurgTV" class="logo"></a>
            <a href="index.html" class="back-link"><svg viewBox="0 0 24 24"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg><span>Dashboard</span></a>
        </div>
    </header>
    <main class="main">
        <h1 class="page-title">Account</h1>
        <p class="page-subtitle" id="userEmail"></p>
        <div class="section">
            <div class="section-title">Informazioni account</div>
            <div class="info-card"><div class="info-label">Email</div><div class="info-value" id="emailDisplay">-</div></div>
            <div class="info-card"><div class="info-label">Piano</div><div class="info-value" id="planDisplay">-</div></div>
        </div>
        <div class="section">
            <div class="section-title">Sicurezza</div>
            <button class="btn btn-primary" onclick="resetPassword()">
                <svg viewBox="0 0 24 24"><path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"/></svg>
                <span>Reimposta password</span>
            </button>
        </div>
        <div class="section">
            <div class="section-title">Sessione</div>
            <button class="btn btn-secondary" onclick="logout()">
                <svg viewBox="0 0 24 24"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
                <span>Esci</span>
            </button>
        </div>
        <div class="section">
            <div class="section-title">Zona pericolosa</div>
            <button class="btn btn-danger" onclick="deleteAccount()">
                <svg viewBox="0 0 24 24"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/><line x1="10" y1="11" x2="10" y2="17"/><line x1="14" y1="11" x2="14" y2="17"/></svg>
                <span>Elimina account</span>
            </button>
        </div>
    </main>
    <footer class="footer">
        <a href="legal/privacy.html">Privacy</a>
        <a href="legal/terms.html">Termini</a>
        <a href="mailto:info@burgtv.com">info@burgtv.com</a>
    </footer>
    <script>
        const SUPABASE_URL='https://ugspmqfduabfmfsoxqoc.supabase.co';
        document.addEventListener('DOMContentLoaded',function(){
            const email=localStorage.getItem('user_email')||'-';
            document.getElementById('emailDisplay').textContent=email;
            document.getElementById('userEmail').textContent=email;
        });
        function resetPassword(){window.location.href='forgot-password.html'}
        function logout(){localStorage.removeItem('access_token');localStorage.removeItem('user_email');window.location.href='login.html'}
        async function deleteAccount(){
            if(!confirm('Sei sicuro di voler eliminare il tuo account? Questa azione Ã¨ irreversibile.'))return;
            if(!confirm('Conferma finale: tutti i dati verranno eliminati permanentemente.'))return;
            const token=localStorage.getItem('access_token');
            try{await fetch(`${SUPABASE_URL}/functions/v1/delete-account`,{method:'POST',headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'}});localStorage.clear();alert('Account eliminato.');window.location.href='https://burgtv.com'}catch(e){alert('Errore. Contatta info@burgtv.com')}
        }
    </script>
</body>
</html>
